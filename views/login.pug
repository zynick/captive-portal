//- http://wiki.mikrotik.com/wiki/HotSpot_external_login_page

extends layout

append css
    link(rel='stylesheet', href='/css/login.css')

block content
    a(href=url)
        img#logo(src=logo)
    p#slogan=slogan

    form#login-form(name='form', method='POST', action=data['link-login-only'], onSubmit='return encryptPass()')
        if data.error
            .form-group
                p.error=data.error
        .form-group
            input.form-control(type='text', name='username', value=data.username, placeholder='Username')
        .form-group
            input.form-control(type='password', name='password', placeholder='Password')
        .form-group
            input.form-control.btn.btn-primary.btn-default(name='submit', type='submit', value='Log in')

append script
    if data['chap-challenge']
        script(src='/js/md5.js')
        script(type='text/javascript').
            function encryptPass() {
                document.form.password.value = md5('#{data["chap-id"]}' + document.form.password.value + '#{data["chap-challenge"]}');
                return true;
            }
    else
        script(type='text/javascript').
            function encryptPass() { return true; }